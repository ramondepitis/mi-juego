<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>LAS CHICAS DE MAX</title>
  <style>
    /* El body y html ocupan todo el alto y sin márgenes */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #fff; /* Por defecto: pausa = blanco */
      font-family: sans-serif;
    }

    /* Encabezado con título y botón Reiniciar a la derecha */
    header {
      width: 100%;
      display: flex;
      align-items: center;
      background-color: #eee; 
      padding: 10px 20px;
      box-sizing: border-box;
    }
    header h1 {
      flex-grow: 1;          /* Ocupa todo el espacio disponible */
      text-align: center;    /* Centra el título */
      font-size: 24px;       /* Tamaño moderado */
      margin: 0;             /* Quita márgenes por defecto */
    }
    #btn-reiniciar {
      font-size: 16px;
      padding: 8px 16px;
      cursor: pointer;
      margin-left: auto;     /* Se va a la derecha */
    }

    /* Contenedor principal donde va el juego (debajo del header).
       Usamos flex para centrar vertical/horizontalmente */
    #game-container {
      position: relative;          /* Para posicionar el mensaje FINAL */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: calc(100% - 60px); /* Resta espacio del header */
      background-color: #fff;        /* Pausado = blanco */
      transition: background-color 0.5s; 
      box-sizing: border-box;
      padding: 20px 0;
    }

    /* Clase que aplicamos cuando el juego está corriendo 
       (cambia el fondo a amarillo) */
    .running {
      background-color: #ffff99 !important; /* amarillo claro */
    }

    /* Contenedor del mensaje FINAL */
    #final-message {
      position: absolute;
      top: 40%;
      font-size: 64px;
      font-weight: bold;
      color: red;
      text-shadow: 2px 2px 4px #000;
      display: none; /* Oculto al inicio */
      z-index: 10; /* Para que aparezca por encima del banner */
    }

    /* Banner con tiempo, palabra y score */
    #banner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #ddd;
      border-radius: 10px;
      padding: 15px 30px;
      min-width: 700px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    /* Temporizador a la izquierda */
    .time {
      background-color: #007bff;
      color: #fff;
      font-size: 48px;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 8px;
    }
    /* Palabra al centro */
    .word {
      background-color: #007bff;
      color: #fff;
      font-size: 56px;
      font-weight: bold;
      padding: 10px 40px;
      border-radius: 8px;
      margin: 0 40px;
      text-align: center;
      min-width: 200px;
      transition: background-color 0.3s;
    }
    /* Puntaje a la derecha */
    .score {
      background-color: orange;
      color: #fff;
      font-size: 48px;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 8px;
    }

    /* Contenedor de los botones Acierto/Error y Reanudar */
    #buttons {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* Fila de Acierto y Error */
    #row1 {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    /* Estilos de botones Acierto y Error */
    #btn-acierto {
      background-color: #28a745; /* verde */
      color: #fff;
      font-size: 18px;
      font-weight: bold;
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #btn-acierto:hover {
      background-color: #218838;
    }

    #btn-error {
      background-color: #dc3545; /* rojo */
      color: #fff;
      font-size: 18px;
      font-weight: bold;
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #btn-error:hover {
      background-color: #c82333;
    }

    /* Botón Reanudar/Pausar */
    #btn-toggle {
      font-size: 20px;
      font-weight: bold;
      padding: 20px 40px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background-color: #0069d9; /* azul */
      color: #fff;
    }
    #btn-toggle:hover {
      background-color: #0056b3;
    }

  </style>
</head>
<body>
  <!-- Encabezado con Título centrado y botón Reiniciar a la derecha -->
  <header>
    <h1>LAS CHICAS DE MAX</h1>
    <button id="btn-reiniciar">Reiniciar</button>
  </header>

  <!-- Contenedor principal del juego -->
  <div id="game-container">
    <!-- Mensaje FINAL! (se mostrará cuando el tiempo llegue a cero) -->
    <div id="final-message">FINAL!</div>

    <!-- Banner con tiempo, palabra y puntaje -->
    <div id="banner">
      <div id="time" class="time">60</div>
      <div id="word" class="word"></div>
      <div id="score" class="score">0</div>
    </div>

    <!-- Contenedor de botones -->
    <div id="buttons">
      <!-- Fila de Acierto y Error -->
      <div id="row1">
        <button id="btn-acierto">Acierto</button>
        <button id="btn-error">Error</button>
      </div>
      <!-- Botón Reanudar/Pausar -->
      <button id="btn-toggle">Reanudar</button>
    </div>
  </div>

  <script>
    let palabras = [];

    // Variables de estado
    let palabraActual = "";
    let tiempoRestante = 60;
    let puntos = 0;
    let intervalo = null;
    let juegoPausado = true;
    let yaRespondido = true;

    // Referencias al DOM
    const gameContainer = document.getElementById("game-container");
    const finalMessage  = document.getElementById("final-message");

    const timeEl    = document.getElementById("time");
    const wordEl    = document.getElementById("word");
    const scoreEl   = document.getElementById("score");

    const btnToggle     = document.getElementById("btn-toggle");
    const btnReiniciar  = document.getElementById("btn-reiniciar");
    const btnAcierto    = document.getElementById("btn-acierto");
    const btnError      = document.getElementById("btn-error");

    // Color original de la palabra (azul)
    const colorOriginalPalabra = "#007bff";

    //--- Cargamos el JSON cuando la página termine de cargar
    window.onload = () => {
      // FETCH para cargar 'cadena.json' (ajusta la ruta si está en otra carpeta)
      fetch("cadena.json")
        .then(response => response.json())
        .then(data => {
          // Guardamos la lista en la variable global
          palabras = data;
          console.log("Cargadas", palabras.length, "palabras");
          // Ahora que tenemos las palabras, iniciamos el juego
          reiniciarJuego();
        })
        .catch(error => {
          console.error("Error al cargar cadena.json:", error);
        });
    };

    // ---------------------------------------------
    //  Obtiene una palabra aleatoria del array
    // ---------------------------------------------
    function obtenerPalabraAleatoria() {
      const indice = Math.floor(Math.random() * palabras.length);
      return palabras[indice];
    }

    // ---------------------------------------------
    //  Temporizador que decrementa cuando está corriendo
    // ---------------------------------------------
    function iniciarTemporizador() {
      if (intervalo) clearInterval(intervalo);

      intervalo = setInterval(() => {
        if (!juegoPausado) {
          tiempoRestante--;
          if (tiempoRestante <= 0) {
            tiempoRestante = 0;
            clearInterval(intervalo);
            btnToggle.disabled = true;
            mostrarFinal();
          }
          timeEl.textContent = tiempoRestante;
        }
      }, 1000);
    }

    // ---------------------------------------------
    //  Muestra el texto FINAL!
    // ---------------------------------------------
    function mostrarFinal() {
      finalMessage.style.display = "block";
    }

    // ---------------------------------------------
    //  Oculta el texto FINAL! (al reiniciar)
    // ---------------------------------------------
    function ocultarFinal() {
      finalMessage.style.display = "none";
    }

    // ---------------------------------------------
    //  Acierto (+1) -> iluminamos de verde la palabra
    // ---------------------------------------------
    function manejarAcierto() {
      if (juegoPausado && !yaRespondido && tiempoRestante > 0) {
        puntos++;
        yaRespondido = true;
        scoreEl.textContent = puntos;
        wordEl.style.backgroundColor = "#28a745"; // Verde
      }
    }

    // ---------------------------------------------
    //  Error (-1) -> iluminamos de rojo la palabra
    // ---------------------------------------------
    function manejarError() {
      if (juegoPausado && !yaRespondido && tiempoRestante > 0) {
        puntos--;
        yaRespondido = true;
        scoreEl.textContent = puntos;
        wordEl.style.backgroundColor = "#dc3545"; // Rojo
      }
    }

    // Pausar y reaunudar nuevo
    function togglePausa() {
      if (juegoPausado) {
        juegoPausado = false;
        btnToggle.textContent = "Pausar (Usa ESPACIO)";

        palabraActual = obtenerPalabraAleatoria();
        wordEl.textContent = palabraActual;
        wordEl.style.backgroundColor = colorOriginalPalabra;
        
        yaRespondido = false;
      } else {
        juegoPausado = true;
        btnToggle.textContent = "Reanudar (Usa ESPACIO)";
      }
    }
    // ---------------------------------------------
    /**
    function togglePausa() {
      if (juegoPausado) {
        // REANUDAR
        juegoPausado = false;
        btnToggle.textContent = "Pausar";

        // Genera nueva palabra y recupera color original
        palabraActual = obtenerPalabraAleatoria();
        wordEl.textContent = palabraActual;
        wordEl.style.backgroundColor = colorOriginalPalabra;
        
        yaRespondido = false;

        // Fondo en modo "corriendo" -> amarillo
        gameContainer.classList.add("running");
      } else {
        // PAUSAR
        juegoPausado = true;
        btnToggle.textContent = "Reanudar";

        // Fondo en modo "pausa" -> blanco
        gameContainer.classList.remove("running");
      }
    }
    **/
    // ---------------------------------------------
    

    // ---------------------------------------------
    //  Reiniciar juego a estado inicial
    // ---------------------------------------------
    function reiniciarJuego() {
      if (intervalo) clearInterval(intervalo);

      tiempoRestante = 60;
      puntos = 0;
      juegoPausado = true;
      palabraActual = "";
      yaRespondido = true;

      timeEl.textContent  = tiempoRestante;
      scoreEl.textContent = puntos;
      wordEl.textContent  = "";
      wordEl.style.backgroundColor = colorOriginalPalabra;
      btnToggle.disabled  = false;
      btnToggle.textContent = "Reanudar";

      // Volvemos a color blanco (pausa)
      gameContainer.classList.remove("running");
      ocultarFinal();

      // Iniciamos el temporizador (siempre activo; 
      // solo resta si no está pausado)
      iniciarTemporizador();
    }

    // Eventos
    /**
     * btnAcierto.addEventListener("click", manejarAcierto);
    btnError.addEventListener("click", manejarError);
    //btnToggle.addEventListener("click", togglePausa);
    btnReiniciar.addEventListener("click", reiniciarJuego);
    // Evento para detectar la tecla ESPACIO
    document.addEventListener("keydown", (event) => {
      if (event.code === "Space") {
        togglePausa();
      }
    });
     **/
    
     btnAcierto.addEventListener("click", () => {
      manejarAcierto();
      btnAcierto.blur(); // Evita que quede enfocado
    });

    btnError.addEventListener("click", () => {
      manejarError();
      btnError.blur(); // Evita que quede enfocado
    });

    btnReiniciar.addEventListener("click", () => {
      reiniciarJuego();
      btnReiniciar.blur();
    });

    // Detectar tecla ESPACIO solo para reanudar/pausar
    document.addEventListener("keydown", (event) => {
      if (event.code === "Space") {
        event.preventDefault(); // Evita que el botón enfocado se active
        togglePausa();
      }
    });
    
    // Iniciamos en estado pausado con todo reseteado
    reiniciarJuego();
  </script>
</body>
</html>






